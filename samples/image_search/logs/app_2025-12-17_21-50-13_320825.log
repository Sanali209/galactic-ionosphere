2025-12-17 21:50:13.322 | INFO     | src.core.logging:setup_logging:22 - Logging initialized.
2025-12-17 21:50:13.322 | INFO     | __main__:main:76 - ============================================================
2025-12-17 21:50:13.323 | INFO     | __main__:main:77 - Image Search Application Starting
2025-12-17 21:50:13.323 | INFO     | __main__:main:78 - ============================================================
2025-12-17 21:50:13.324 | INFO     | src.core.locator:init:36 - ServiceLocator initialized.
2025-12-17 21:50:13.341 | INFO     | src.core.database.manager:connect:22 - Connected to MongoDB at mongodb://localhost:27017, DB: image_search_db
2025-12-17 21:50:13.341 | DEBUG    | src.core.locator:register_system:45 - Registering system: CommandBus
2025-12-17 21:50:13.341 | DEBUG    | src.core.locator:register_system:45 - Registering system: JournalService
2025-12-17 21:50:13.342 | DEBUG    | src.core.locator:register_system:45 - Registering system: AssetManager
2025-12-17 21:50:13.342 | DEBUG    | src.core.locator:register_system:45 - Registering system: TaskSystem
2025-12-17 21:50:13.342 | DEBUG    | src.core.locator:register_system:45 - Registering system: SearchService
2025-12-17 21:50:13.342 | INFO     | src.core.locator:start_all:62 - Starting all systems...
2025-12-17 21:50:13.343 | INFO     | src.core.commands.bus:initialize:15 - CommandBus initialized.
2025-12-17 21:50:13.343 | INFO     | src.core.locator:start_all:66 - System CommandBus started.
2025-12-17 21:50:13.343 | INFO     | src.core.journal.service:initialize:11 - JournalService initialized.
2025-12-17 21:50:13.343 | INFO     | src.core.locator:start_all:66 - System JournalService started.
2025-12-17 21:50:13.343 | INFO     | src.core.assets.manager:initialize:17 - AssetManager initialized.
2025-12-17 21:50:13.344 | INFO     | src.core.locator:start_all:66 - System AssetManager started.
2025-12-17 21:50:13.344 | INFO     | src.core.tasks.system:initialize:19 - TaskSystem initializing...
2025-12-17 21:50:13.347 | INFO     | src.core.tasks.system:initialize:35 - Loaded 0 pending tasks.
2025-12-17 21:50:13.347 | INFO     | src.core.locator:start_all:66 - System TaskSystem started.
2025-12-17 21:50:13.347 | INFO     | app_search_service:initialize:31 - SearchService initialized
2025-12-17 21:50:13.347 | INFO     | src.core.locator:start_all:66 - System SearchService started.
2025-12-17 21:50:13.348 | INFO     | src.ui.menus.action_registry:__init__:17 - ActionRegistry initialized
2025-12-17 21:50:13.348 | INFO     | src.ui.docking.dock_manager:__init__:50 - DockManager initialized
2025-12-17 21:50:13.357 | INFO     | src.ui.menus.menu_builder:__init__:16 - MenuBuilder initialized
2025-12-17 21:50:13.364 | DEBUG    | src.ui.docking.dock_manager:register_panel:59 - Panel registered: search
2025-12-17 21:50:13.365 | DEBUG    | src.ui.docking.panel_base:__init__:29 - Panel created: search
2025-12-17 21:50:13.376 | INFO     | src.ui.docking.dock_manager:create_panel:92 - Panel created: search
2025-12-17 21:50:13.378 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: file_new_search
2025-12-17 21:50:13.378 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: file_open_downloads
2025-12-17 21:50:13.379 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: file_exit
2025-12-17 21:50:13.379 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: edit_select_all
2025-12-17 21:50:13.380 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: edit_deselect_all
2025-12-17 21:50:13.380 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: search_images
2025-12-17 21:50:13.381 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: download_selected
2025-12-17 21:50:13.381 | DEBUG    | src.ui.menus.action_registry:register_action:56 - Action registered: download_all
2025-12-17 21:50:13.382 | INFO     | app_main_window:__init__:39 - Image Search MainWindow initialized
2025-12-17 21:50:13.558 | INFO     | __main__:main:106 - Application started successfully
2025-12-17 21:50:13.600 | DEBUG    | src.core.tasks.system:_worker:90 - Worker 0 started.
2025-12-17 21:50:13.601 | DEBUG    | src.core.tasks.system:_worker:90 - Worker 1 started.
2025-12-17 21:50:13.602 | DEBUG    | src.core.tasks.system:_worker:90 - Worker 2 started.
2025-12-17 21:50:15.950 | INFO     | app_search_panel:_on_search_clicked:88 - Search requested: 'esdfsdf' (count: 20)
2025-12-17 21:50:15.951 | INFO     | app_main_window:_execute_search:124 - Executing search: 'esdfsdf' (count: 20)
2025-12-17 21:50:15.957 | DEBUG    | src.core.tasks.system:register_handler:55 - Registered task handler: search_images
2025-12-17 21:50:16.004 | INFO     | src.core.tasks.system:submit:83 - Task submitted: Search: esdfsdf (6943097772ffb5fafc0c6af8)
2025-12-17 21:50:16.004 | INFO     | app_main_window:_run_search:162 - Search task submitted successfully
2025-12-17 21:50:16.018 | INFO     | app_search_task:search_images_handler:22 - Search handler executing: 'esdfsdf' (count: 20)
2025-12-17 21:50:16.020 | INFO     | app_search_service:search_images:44 - Searching images: 'esdfsdf' (max: 20)
2025-12-17 21:50:16.022 | ERROR    | app_search_service:search_images:70 - Search failed: No module named 'duckduckgo_search'
2025-12-17 21:50:16.023 | INFO     | app_search_task:search_images_handler:39 - Search returned 0 results
2025-12-17 21:50:16.023 | ERROR    | app_search_task:search_images_handler:69 - Search handler failed: Class SearchHistory must define _collection_name
2025-12-17 21:50:16.024 | ERROR    | src.core.tasks.system:_worker:119 - Task 6943097772ffb5fafc0c6af8 failed
Traceback (most recent call last):

  File "D:\github\USCore\samples\image_search\main.py", line 121, in <module>
    loop.run_forever()
    │    └ <function _QEventLoop.run_forever at 0x00000155F0416CA0>
    └ <QIOCPEventLoop running=True closed=False debug=False>

  File "D:\github\USCore\.venv\Lib\site-packages\qasync\__init__.py", line 404, in run_forever
    rslt = self.__app.exec()
           └ <QIOCPEventLoop running=True closed=False debug=False>
  File "D:\github\USCore\.venv\Lib\site-packages\qasync\__init__.py", line 307, in timerEvent
    handle._run()
    │      └ <function Handle._run at 0x00000155EFC22840>
    └ <Handle Task.task_wakeup(<Future finis...wledged=True)>)>
  File "C:\Users\User\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...wledged=True)>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...wledged=True)>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...wledged=True)>)>

> File "D:\github\USCore\templates\foundation\src\core\tasks\system.py", line 114, in _worker
    result = await handler(*record.task_args)
                   │        │      └ <src.core.database.orm.ListField object at 0x00000155F17B6ED0>
                   │        └ <src.core.tasks.models.TaskRecord object at 0x00000155F296F890>
                   └ <function search_images_handler at 0x00000155F29556C0>

  File "D:\github\USCore\samples\image_search\src\tasks\search_task.py", line 47, in search_images_handler
    await search_history.save()
          │              └ <function CollectionRecord.save at 0x00000155F1793420>
          └ <app_search_history.SearchHistory object at 0x00000155F2977290>

  File "D:\github\USCore\templates\foundation\src\core\database\orm.py", line 317, in save
    coll = self.get_collection()
           │    └ <classmethod(<function CollectionRecord.get_collection at 0x00000155F1793060>)>
           └ <app_search_history.SearchHistory object at 0x00000155F2977290>

  File "D:\github\USCore\templates\foundation\src\core\database\orm.py", line 255, in get_collection
    raise ValueError(f"Class {cls.__name__} must define _collection_name")

ValueError: Class SearchHistory must define _collection_name
